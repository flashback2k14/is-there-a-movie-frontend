<html><head></head><body><dom-module id="botomo-app">
  <template>
    <style>.app{@apply (--layout-vertical);}.app--centering{@apply (--layout-center);}.app__title{margin-top:50px;@apply (--paper-font-display2);}.app__content{width:100%;margin-top:30px;padding:20px 0 20px 0;}.app__content--search{width:70%;}.app__content--add{width:50%;}.app__content--list{width:50%;}.app__info{--paper-toast-background-color:var(--paper-red-a400);--paper-toast-color:#000;}</style>

    <div class="app">

      
      <botomo-data id="bdRequester" on-request-response="_handleRequestResponse" on-request-error="_handleRequestError" on-request-failed="_handleRequestFailed">
      </botomo-data>

      
      <div class="app app--centering app__title">
        <h1>is there a movie?</h1>
      </div>

      
      <div class="app app--centering app__content">
        <botomo-search class="app__content--search" webservice-url="[[webserviceUrl]]" on-search-all="_handleSearchAll" on-search-response="_handleSearchResponse" on-request-error="_handleRequestError" on-request-failed="_handleRequestFailed">
        </botomo-search>
      </div>

      
      <template is="dom-if" if="{{showAddArea}}">
        <div class="app app--centering app__content">
          <botomo-add class="app__content--add" webservice-url="[[webserviceUrl]]" on-add-request-canceled="_handleAddRequestCanceled" on-add-request-finished="_handleAddRequestFinished" on-request-error="_handleRequestError" on-request-failed="_handleRequestFailed">
          </botomo-add>
        </div>
      </template>
    
      
      <div class="app app--centering app__content">
        <botomo-list id="bList" class="app__content--list" webservice-url="[[webserviceUrl]]" data="{{data}}" on-request-error="_handleRequestError" on-request-failed="_handleRequestFailed">
        </botomo-list>
      </div>

      
      <paper-toast id="infoToast" class="app__info"></paper-toast>

    </div>

  </template>

  <script>Polymer({is:"botomo-app",properties:{webserviceUrl:{type:String,value:"",reflectToAttribute:!0},showAddArea:{type:Boolean,value:!1},data:{type:Array,value:[]}},_setWebserviceUrl:function(){var e=window.location.hostname.indexOf("localhost")!==-1?"http://localhost:8080/":"https://botomo.herokuapp.com/";this.set("webserviceUrl",e)},_showMessage:function(e){this.$.infoToast.text=e,this.$.infoToast.show()},_getAll:function(){var e={url:this.webserviceUrl+"api/v1/books"};this.$.bdRequester.request(e)},_hideNotifyGetAll:function(e){this.set("showAddArea",!1),this._showMessage("Add new Book canceled!"),this._getAll()},_handleSearchAll:function(){this.set("showAddArea",!1),this.set("data",[]),this._getAll()},_handleSearchResponse:function(e){this.set("data",[]);var t=e.detail.detail.response;t.length>0?(this.set("showAddArea",!1),t.forEach(function(e){this.push("data",e)}.bind(this))):(this._showMessage("No Books available! Please add this Book!"),this.set("showAddArea",!0))},_handleAddRequestCanceled:function(){this._hideNotifyGetAll("Add new Book canceled!")},_handleAddRequestFinished:function(e){this._hideNotifyGetAll("Add new Book finished!")},_handleRequestResponse:function(e){var t=e.detail.detail.response;t.forEach(function(e){this.unshift("data",e)}.bind(this))},_handleRequestError:function(e){return e instanceof Event?void this._showMessage(e.detail.detail.error.message?e.detail.detail.error.message:"Error to load Data!"):void this._showMessage("Backend Error: ToDo --> get Message from Error")},_handleRequestFailed:function(e){this._showMessage(e.detail.msg)},ready:function(){this._setWebserviceUrl(),this._getAll()}});</script>
</dom-module>
</body></html>